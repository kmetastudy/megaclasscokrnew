{% extends 'teacher/base.html' %}
{% load static %}

{% block title %}AI λ¬Έν•­ μƒμ„±κΈ°{% endblock %}

{% block extra_css %}
<!-- CodeMirror CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/material.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/show-hint.min.css">

<!-- CP Agent CSS νμΌλ“¤ -->
<link rel="stylesheet" href="/static/css/cp_agent/cp_agent_base.css">
<link rel="stylesheet" href="/static/css/cp_agent/cp_agent_editor.css">
<link rel="stylesheet" href="/static/css/cp_agent/cp_agent_components.css">
{% endblock %}

{% block content %}
<div class="flex h-screen bg-gray-50 gap-6">
    <!-- μΆμΈ΅ ν¨λ„ (1/3) -->
    <div id="leftPanel" class="w-1/3 bg-white border border-gray-300 panel overflow-hidden flex flex-col rounded shadow-sm">
        <div class="px-4 py-2.5 border-b border-gray-200 flex justify-between items-center">
            <h2 class="text-lg font-medium text-gray-800">π‡ λ¬Έν•­ & ν…ν”λ¦Ώ</h2>
            <button onclick="togglePanel('left')" class="text-gray-600 hover:text-white hover:bg-orange-400 p-2 rounded transition">
                <i class="fas fa-chevron-left"></i>
            </button>
        </div>
        
        <div class="flex-1 overflow-y-auto">
            <!-- νƒ­ λ©”λ‰΄ -->
            <div class="flex border-b border-gray-200 bg-gray-50">
                <button onclick="switchTab('contents')" class="tab-btn flex-1 py-3 px-4 text-center text-gray-700 hover:bg-white transition border-b-2 border-orange-400 bg-white" data-tab="contents">
                    λ¬Έν•­ λ¦¬μ¤νΈ
                </button>
                <button onclick="switchTab('templates')" class="tab-btn flex-1 py-3 px-4 text-center text-gray-600 hover:bg-white transition border-b-2 border-transparent" data-tab="templates">
                    ν…ν”λ¦Ώ λ¦¬μ¤νΈ
                </button>
            </div>
            
            <!-- λ¬Έν•­ λ¦¬μ¤νΈ νƒ­ -->
            <div id="contentsTab" class="tab-content active p-4">
                <!-- κ²€μƒ‰ ν•„ν„° -->
                <div class="filter-section">
                    <div class="grid grid-cols-2 gap-3 mb-3">
                        <select id="contentCategory" class="form-select">
                            <option value="">μΉ΄ν…κ³ λ¦¬ μ„ νƒ</option>
                        </select>
                        
                        <select id="contentType" class="form-select">
                            <option value="">νƒ€μ… μ„ νƒ</option>
                        </select>
                        
                        <select id="contentCourse" class="form-select">
                            <option value="">μ½”μ¤ μ„ νƒ</option>
                        </select>
                        
                        <select id="contentChapter" class="form-select">
                            <option value="">λ€λ‹¨μ› μ„ νƒ</option>
                        </select>
                    </div>
                    
                    <div class="flex space-x-2">
                        <input type="text" id="contentSearch" placeholder="ν‚¤μ›λ“ κ²€μƒ‰..." class="form-input">
                        <button onclick="CPAgent.Data.searchContents()" class="btn-secondary px-4 py-2">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    
                    <div class="mt-3 text-sm text-gray-600">
                        κ²€μƒ‰ κ²°κ³Ό: <span id="contentsCount" class="font-semibold">0</span>κ°
                    </div>
                </div>
                
                <!-- λ¬Έν•­ λ¦¬μ¤νΈ -->
                <div id="contentsList" class="space-y-2">
                    <!-- λ™μ μΌλ΅ λ΅λ“λ¨ -->
                </div>
            </div>
            
            <!-- ν…ν”λ¦Ώ λ¦¬μ¤νΈ νƒ­ -->
            <div id="templatesTab" class="tab-content p-4">
                <!-- ν…ν”λ¦Ώ λ§λ“¤κΈ° λ²„νΌ -->
                <button onclick="CPAgent.UI.openTemplateModal()" class="w-full btn-secondary py-2 px-4 mb-4">
                    <i class="fas fa-plus mr-2"></i>ν…ν”λ¦Ώ λ§λ“¤κΈ°
                </button>
                
                <!-- κ²€μƒ‰ ν•„ν„° -->
                <div class="filter-section">
                    <div class="grid grid-cols-2 gap-3 mb-3">
                        <select id="templateCategory" class="form-select">
                            <option value="">μΉ΄ν…κ³ λ¦¬ μ„ νƒ</option>
                        </select>
                        
                        <select id="templateType" class="form-select">
                            <option value="">νƒ€μ… μ„ νƒ</option>
                        </select>
                    </div>
                    
                    <div class="flex space-x-2">
                        <input type="text" id="templateSearch" placeholder="ν‚¤μ›λ“ κ²€μƒ‰..." class="form-input">
                        <button onclick="CPAgent.Data.searchTemplates()" class="btn-secondary px-4 py-2">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    
                    <div class="mt-3 text-sm text-gray-600">
                        κ²€μƒ‰ κ²°κ³Ό: <span id="templatesCount" class="font-semibold">0</span>κ°
                    </div>
                </div>
                
                <!-- ν…ν”λ¦Ώ λ¦¬μ¤νΈ -->
                <div id="templatesList" class="space-y-2">
                    <!-- λ™μ μΌλ΅ λ΅λ“λ¨ -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- μΆμΈ΅ ν¨λ„ ν† κΈ€ λ²„νΌ (μ¨κΉ€ μƒνƒμΌ λ•) -->
    <button id="leftToggleBtn" onclick="togglePanel('left')" class="bg-gray-600 hover:bg-orange-400 text-white p-2 rounded-r transition fixed left-0 top-1/2 transform -translate-y-1/2 z-10" style="display: none;">
        <i class="fas fa-chevron-right"></i>
    </button>
    
    <!-- μ¤‘κ°„ ν¨λ„ (1/3) -->
    <div id="middlePanel" class="w-1/3 bg-white border border-gray-300 panel overflow-hidden flex flex-col rounded shadow-sm">
        <div class="p-4 border-b border-gray-200">
            <div class="flex items-center justify-between">
                <h2 class="text-lg font-medium text-gray-800">β¨ λ¬Έν•­ μ μ‘</h2>
                <button onclick="CPAgent.Content.createNewContent()" class="text-sm btn-primary px-3 py-1">
                    <i class="fas fa-plus mr-1"></i>μƒ λ¬Έν•­
                </button>
            </div>
        </div>
        
        <div class="flex-1 overflow-y-auto p-6 bg-gray-50">
            <form id="contentForm">
                <!-- κΈ°λ³Έ μ •λ³΄ -->
                <div class="mb-4">
                    <div class="flex items-center space-x-2">
                        <label class="text-sm font-medium text-gray-700 whitespace-nowrap">μ λ© *</label>
                        <input type="text" id="title" name="title" required class="form-input">
                    </div>
                </div>
                
                <div class="mb-4">
                    <div class="flex items-center space-x-2">
                        <label class="text-sm font-medium text-gray-700 whitespace-nowrap">νƒ€μ… *</label>
                        <select id="content_type" name="content_type" required class="form-select">
                            <option value="">μ„ νƒν•μ„Έμ”</option>
                        </select>
                    </div>
                </div>
                
                <div class="mb-6">
                    <div class="flex items-center space-x-2">
                        <label class="text-sm font-medium text-gray-700 whitespace-nowrap">ν…ν”λ¦Ώ</label>
                        <select id="template_select" name="template_select" class="form-select">
                            <option value="">ν…ν”λ¦Ώ μ—†μ</option>
                        </select>
                    </div>
                </div>
                
                <!-- ν”„λ΅¬ν”„νΈ μ…λ ¥ -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">λ¬Έν•­ μƒμ„± μ§€μ‹μ‚¬ν•­ (Markdown μ§€μ›)</label>
                    <textarea id="prompt_content" name="prompt" rows="20" class="form-textarea font-mono text-sm"
                              placeholder="λ¬Έν•­ μƒμ„±μ„ μ„ν• μƒμ„Έν• μ§€μ‹μ‚¬ν•­μ„ μ…λ ¥ν•μ„Έμ”..."></textarea>
                </div>
                
                <!-- λ‹µμ• μ…λ ¥ -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">λ‹µμ• (JSON)</label>
                    <textarea id="answer_input" name="answer_input" class="hidden">{}</textarea>
                    <div id="answerInputEditor"></div>
                </div>
                
                <!-- μ•„μ½”λ””μ–Έ μ„Ήμ… -->
                <div class="mb-6">
                    <div class="accordion-header flex items-center justify-between p-3 bg-gray-100 rounded-lg cursor-pointer" onclick="toggleAccordion(this)">
                        <span class="text-sm font-medium text-gray-700">κ³ κΈ‰ μ„¤μ •</span>
                        <i class="fas fa-chevron-down text-gray-500 transition-transform"></i>
                    </div>
                    <div class="accordion-content">
                        <div class="pt-4 space-y-4">
                            <!-- λ©”νƒ€λ°μ΄ν„° -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">λ©”νƒ€λ°μ΄ν„° (JSON)</label>
                                <textarea id="meta_content" name="meta_data" class="hidden">{}</textarea>
                                <div id="metaEditor"></div>
                            </div>
                            
                            <!-- νƒκ·Έ -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">νƒκ·Έ/ν‰κ°€κΈ°μ¤€ (JSON)</label>
                                <textarea id="tags_content" name="tags" class="hidden">{}</textarea>
                                <div id="tagsEditor"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- AI μ”μ²­ λ²„νΌ -->
                <button type="button" onclick="CPAgent.Content.requestAI()" class="w-full btn-primary py-3 px-4">
                    <i class="fas fa-magic mr-2"></i>AIλ΅ λ¬Έν•­ μƒμ„±ν•κΈ°
                </button>
            </form>
        </div>
    </div>
    
    <!-- μ°μΈ΅ ν¨λ„ (1/3) -->
    <div id="rightPanel" class="w-1/3 bg-white border border-gray-300 panel overflow-hidden flex flex-col rounded shadow-sm">
        <div class="p-4 border-b border-gray-200">
            <h2 class="text-lg font-medium text-gray-800">π λ―Έλ¦¬λ³΄κΈ° & νΈμ§‘</h2>
        </div>
        
        <!-- νƒ­ λ©”λ‰΄ -->
        <div class="flex border-b border-gray-200 bg-gray-50">
            <button onclick="switchPreviewTab('render')" class="preview-tab-btn flex-1 py-3 px-4 text-center text-gray-700 hover:bg-white transition border-b-2 border-gray-600 bg-white" data-tab="render">
                λ λ”λ§
            </button>
            <button onclick="switchPreviewTab('html')" class="preview-tab-btn flex-1 py-3 px-4 text-center text-gray-600 hover:bg-white transition border-b-2 border-transparent" data-tab="html">
                HTML
            </button>
            <button onclick="switchPreviewTab('text')" class="preview-tab-btn flex-1 py-3 px-4 text-center text-gray-600 hover:bg-white transition border-b-2 border-transparent" data-tab="text">
                ν…μ¤νΈ νΈμ§‘
            </button>
        </div>
        
        <div class="flex-1 overflow-y-auto bg-gray-50">
            <!-- λ λ”λ§ νƒ­ -->
            <div id="renderTab" class="preview-tab-content active p-6">
                <div id="previewContent" class="prose max-w-none">
                    <div class="text-center text-gray-400 py-8">
                        <i class="fas fa-eye text-6xl mb-4"></i>
                        <p>AIλ΅ λ¬Έν•­μ„ μƒμ„±ν•λ©΄ μ—¬κΈ°μ— ν‘μ‹λ©λ‹λ‹¤</p>
                    </div>
                </div>
            </div>
            
            <!-- HTML νƒ­ -->
            <div id="htmlTab" class="preview-tab-content h-full flex flex-col">
                <div class="flex-1" style="height: 80%;">
                    <textarea id="htmlEditor" class="hidden"></textarea>
                    <div id="htmlEditorContainer" class="h-full"></div>
                </div>
                <div style="height: 20%;" class="border-t border-gray-200">
                    <div class="p-2 bg-gray-100">
                        <label class="text-sm font-medium text-gray-700">μ •λ‹µ (JSON)</label>
                    </div>
                    <div id="answerEditorContainer" class="h-full"></div>
                </div>
            </div>
            
            <!-- ν…μ¤νΈ νΈμ§‘ νƒ­ -->
            <div id="textTab" class="preview-tab-content p-6">
                <div class="edit-help">
                    <i class="fas fa-lightbulb"></i>
                    <strong>νΈμ§‘ κ°€μ΄λ“:</strong> 
                    ν…μ¤νΈλ¥Ό λ”λΈ”ν΄λ¦­ν•μ—¬ νΈμ§‘ν•κ³  μ—”ν„°ν‚¤λ΅ μ €μ¥ν•μ„Έμ”. 
                    μ΄λ―Έμ§€λ¥Ό ν΄λ¦­ν•λ©΄ μƒ μ΄λ―Έμ§€λ΅ κµμ²΄ν•  μ μμµλ‹λ‹¤.
                    <div class="mt-2 text-sm opacity-90">
                        <i class="fas fa-keyboard mr-1"></i>
                        μ—”ν„°: μ €μ¥ | ESC: μ·¨μ† | λ”λΈ”ν΄λ¦­: νΈμ§‘ μ‹μ‘
                    </div>
                </div>
                
                <!-- νΈμ§‘ μƒνƒ ν‘μ‹ -->
                <div id="editStatus" class="mb-4 p-2 bg-gray-100 rounded text-sm text-gray-600 hidden">
                    <i class="fas fa-info-circle mr-1"></i>
                    <span id="editStatusText">νΈμ§‘ κ°€λ¥ν• μ”μ†: 0κ°</span>
                </div>
                
                <!-- λ³€κ²½ μ‚¬ν•­ μ»¨νΈλ΅¤ λ²„νΌ -->
                <div id="editControls" class="mb-4 hidden">
                    <div class="flex space-x-2 mb-2">
                        <button onclick="CPAgent.TextEditing.resetAllChanges()" class="flex-1 btn-secondary py-2 px-3 text-sm">
                            <i class="fas fa-undo mr-1"></i>λ¨λ“  λ³€κ²½μ‚¬ν•­ μ·¨μ†
                        </button>
                        <button onclick="CPAgent.TextEditing.showChangedElements()" class="flex-1 btn-primary py-2 px-3 text-sm">
                            <i class="fas fa-search mr-1"></i>λ³€κ²½μ‚¬ν•­ λ³΄κΈ°
                        </button>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="CPAgent.Image.cleanupCorruptedImageSrcs()" class="flex-1 btn-warning py-2 px-3 text-sm">
                            <i class="fas fa-tools mr-1"></i>μ†μƒλ μ΄λ―Έμ§€ κ²½λ΅ μ •λ¦¬
                        </button>
                        <button onclick="CPAgent.Image.validateAllImages()" class="flex-1 btn-success py-2 px-3 text-sm">
                            <i class="fas fa-check-circle mr-1"></i>μ΄λ―Έμ§€ μ ν¨μ„± κ²€μ‚¬
                        </button>
                    </div>
                </div>
                
                <div id="editableContent" class="space-y-4 min-h-[200px] border border-gray-200 rounded-lg p-4 bg-white">
                    <p class="text-gray-400 text-center py-8">
                        <i class="fas fa-edit text-4xl mb-2 block"></i>
                        AIλ΅ λ¬Έν•­μ„ μƒμ„±ν•λ©΄ νΈμ§‘ κ°€λ¥ν• ν…μ¤νΈκ°€ μ—¬κΈ°μ— ν‘μ‹λ©λ‹λ‹¤
                    </p>
                </div>
                
                <!-- μ¨κ²¨μ§„ νμΌ μ…λ ¥ -->
                <input type="file" id="imageUpload" accept="image/*" style="display: none;">
            </div>
        </div>
        
        <!-- μ €μ¥ λ²„νΌ -->
        <div class="p-4 border-t border-gray-200 bg-white">
            <button onclick="CPAgent.Content.saveContent()" class="w-full btn-secondary py-3 px-4">
                <i class="fas fa-save mr-2"></i>μ €μ¥ν•κΈ°
            </button>
        </div>
    </div>
</div>

<!-- ν…ν”λ¦Ώ λ§λ“¤κΈ° λ¨λ‹¬ -->
<div id="templateModal" class="modal-overlay hidden">
    <div class="modal-content max-w-5xl w-full">
        <div class="modal-header">
            <h3 class="text-lg font-medium text-gray-800">ν…ν”λ¦Ώ λ§λ“¤κΈ°</h3>
            <button onclick="CPAgent.UI.closeTemplateModal()" class="text-gray-500 hover:text-gray-700 transition">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>
        <div class="modal-body" style="max-height: calc(90vh - 200px);">
            <form id="templateForm">
                <!-- κΈ°λ³Έ μ •λ³΄ -->
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">μΉ΄ν…κ³ λ¦¬ *</label>
                        <select id="templateFormCategory" class="form-select">
                            <option value="">μΉ΄ν…κ³ λ¦¬ μ„ νƒ</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">νƒ€μ… *</label>
                        <select id="templateFormType" class="form-select" disabled>
                            <option value="">νƒ€μ… μ„ νƒ</option>
                        </select>
                    </div>
                </div>
                
                <!-- ν…ν”λ¦Ώ μ΄λ¦„ -->
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">ν…ν”λ¦Ώ μ΄λ¦„ *</label>
                    <input type="text" id="templateName" class="form-input"
                           placeholder="μ: κ°κ΄€μ‹ 5μ§€ μ„ λ‹¤ν• κΈ°λ³Έ ν…ν”λ¦Ώ">
                </div>
                
                <!-- HTML ν…ν”λ¦Ώ -->
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        HTML ν…ν”λ¦Ώ
                        <span class="text-gray-500 text-xs ml-2">(λ¬Έν•­μ HTML κµ¬μ΅°)</span>
                    </label>
                    <textarea id="templateHtml" rows="8" class="form-textarea font-mono text-sm"
                              placeholder="<div class='question'>
    <h2>λ¬Έμ : {λ¬Έμ  λ‚΄μ©}</h2>
    <div class='choices'>
        <label><input type='radio' name='answer' value='1'> μ„ νƒμ§€ 1</label>
        <label><input type='radio' name='answer' value='2'> μ„ νƒμ§€ 2</label>
    </div>
</div>"></textarea>
                </div>
                
                <!-- μ •λ‹µ ν…ν”λ¦Ώ -->
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        μ •λ‹µ ν…ν”λ¦Ώ (JSON)
                        <span class="text-gray-500 text-xs ml-2">(λ‹µμ• ν•μ‹ μ •μ)</span>
                    </label>
                    <textarea id="templateAnswer" rows="4" class="form-textarea font-mono text-sm">{"correct": "", "explanation": "", "type": "multiple_choice"}</textarea>
                </div>
                
                <!-- λ©”νƒ€λ°μ΄ν„° -->
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        λ©”νƒ€λ°μ΄ν„° (JSON)
                        <span class="text-gray-500 text-xs ml-2">(λ‚μ΄λ„, μ‹κ°„ λ“± λ¶€κ°€ μ •λ³΄)</span>
                    </label>
                    <textarea id="templateMeta" rows="4" class="form-textarea font-mono text-sm">{"difficulty": "medium", "estimated_time": 180}</textarea>
                </div>
                
                <!-- JavaScript μ½”λ“ -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        JavaScript μ½”λ“ (μ„ νƒμ‚¬ν•­)
                        <span class="text-gray-500 text-xs ml-2">(λ¬Έν•­ λ™μ‘μ„ μ„ν• μ¤ν¬λ¦½νΈ)</span>
                    </label>
                    <textarea id="templateJs" rows="6" class="form-textarea font-mono text-sm"
                              placeholder="// μμ‹: μ„ νƒμ§€ ν΄λ¦­ μ‹ μ¤νƒ€μΌ λ³€κ²½
document.querySelectorAll('input[name=&quot;answer&quot;]').forEach(input => {
    input.addEventListener('change', function() {
        // μ„ νƒλ λ‹µμ• μ¤νƒ€μΌλ§
        document.querySelectorAll('label').forEach(label => 
            label.classList.remove('selected')
        );
        this.parentElement.classList.add('selected');
    });
});"></textarea>
                </div>
                
                <!-- λ„μ›€λ§ -->
                <div class="p-3 bg-blue-50 rounded-lg">
                    <h4 class="text-sm font-medium text-blue-800 mb-2">π“ ν…ν”λ¦Ώ μ‘μ„± ν</h4>
                    <ul class="text-xs text-blue-700 space-y-1">
                        <li>β€Ά HTMLμ—μ„ μ¤‘κ΄„νΈ {...}λ¥Ό μ‚¬μ©ν•μ—¬ λ™μ  λ‚΄μ© μ„μΉλ¥Ό ν‘μ‹ν•μ„Έμ”</li>
                        <li>β€Ά μ •λ‹µ ν…ν”λ¦Ώμ€ μ±„μ μ— μ‚¬μ©λλ―€λ΅ μ •ν™•ν• JSON ν•μ‹μΌλ΅ μ‘μ„±ν•μ„Έμ”</li>
                        <li>β€Ά JavaScriptλ” λ¬Έν•­μ μƒνΈμ‘μ© κΈ°λ¥μ„ μ„ν•΄ μ‚¬μ©λ©λ‹λ‹¤ (μ„ νƒμ‚¬ν•­)</li>
                        <li>β€Ά λ―Έλ¦¬λ³΄κΈ° ν…μ¤νΈλ΅ ν…ν”λ¦Ώμ΄ μ¬λ°”λ¥΄κ² μ‘λ™ν•λ”μ§€ ν™•μΈν•μ„Έμ”</li>
                    </ul>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" onclick="CPAgent.Template.testTemplate()" class="btn-primary">
                <i class="fas fa-play mr-2"></i>λ―Έλ¦¬λ³΄κΈ° ν…μ¤νΈ
            </button>
            <button type="button" onclick="CPAgent.Template.saveTemplate()" class="btn-success">
                <i class="fas fa-save mr-2"></i>ν…ν”λ¦Ώ μ €μ¥
            </button>
        </div>
    </div>
</div>

<!-- λ΅λ”© λ¨λ‹¬ -->
<div id="loadingModal" class="modal-overlay hidden">
    <div class="bg-white rounded-lg p-8 text-center shadow-xl">
        <div class="loader mx-auto mb-4"></div>
        <p class="text-gray-700">AIκ°€ λ¬Έν•­μ„ μƒμ„±ν•κ³  μμµλ‹λ‹¤...</p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- jQuery & CodeMirror -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/xml/xml.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/markdown/markdown.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/show-hint.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.2/marked.min.js"></script>

<!-- CP Agent JavaScript νμΌλ“¤ (μμ„ μ¤‘μ”!) -->
<script src="{% static 'js/cp_agent/core.js' %}"></script>
<script src="{% static 'js/cp_agent/ui.js' %}"></script>
<script src="{% static 'js/cp_agent/data.js' %}"></script>
<script src="{% static 'js/cp_agent/content.js' %}"></script>
<script src="{% static 'js/cp_agent/template.js' %}"></script>
<script src="{% static 'js/cp_agent/editor.js' %}"></script>
<script src="{% static 'js/cp_agent/text-editing.js' %}"></script>
<script src="{% static 'js/cp_agent/image.js' %}"></script>
<script src="{% static 'js/cp_agent/events.js' %}"></script>
<script src="{% static 'js/cp_agent/init.js' %}"></script>

<!-- μ „μ—­ ν•¨μλ“¤ (ν•μ„ νΈν™μ„±) -->
<script>
// κΈ°μ΅΄ ν•¨μλ“¤μ„ μ „μ—­μΌλ΅ λ…Έμ¶ (ν•μ„ νΈν™μ„±)
function togglePanel(panel) { CPAgent.UI.togglePanel(panel); }
function switchTab(tab) { CPAgent.UI.switchTab(tab); }
function switchPreviewTab(tab) { CPAgent.UI.switchPreviewTab(tab); }
function toggleAccordion(header) { CPAgent.UI.toggleAccordion(header); }
function loadContent(id) { CPAgent.Content.loadContent(id); }
function selectTemplateFromList(id) { CPAgent.Template.selectTemplateFromList(id); }
function searchContents() { CPAgent.Data.searchContents(); }
function searchTemplates() { CPAgent.Data.searchTemplates(); }
</script>
{% endblock %}